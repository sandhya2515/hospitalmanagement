<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Signup Page</title>
  <link rel="stylesheet" href="css/login.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body style="background-image: url(./images/Sing/bg1.jpg); background-image: linear-gradient(rgb(228, 239, 243), rgb(228, 55, 64));">
	<div th:replace="~{header :: headerFragment}"></div>
	<div th:if="${message}" th:text="${message}" th:classappend=" 'alert ' + ${alertClass}" role="alert" style="display: block;"></div>

	<div class="container min-vh-100">       
	<div class="row rounded-5 shadow p-3 bg-white box-area" style="position: relative; left: 140px;">
        <div class="col-md-12 left-box">
          <div class="featured-image">
            <img src="/images/logo.jpg" class="img-fluid" style="width: 250px;">
          </div> 
        </div>
        <h1 class="text-3xl">Update Profile</h1>    
        <hr>
        <form action="#" th:action="@{/patients/update}" th:object="${patient}" method="post" onsubmit="return validateForm()">
			               <!-- <div class="mb-2 gap-1">
										<input class="style_button_1" type="password" name="password" id="password" placeholder="Password" required />
										<input  type="password" name="confirmPassword" id="confirmPassword" placeholder="Confirm Password" required />

									</div>
									-->
			<div class="mb-2 gap-1">
				<input type="text" name="firstname" id="firstname" placeholder="First name" th:value="*{firstname}" />
				<input type="text" name="middlename" id="middlename" placeholder="Middle name" th:value="*{middlename}" />
				<input type="text" name="lastname" id="lastname" placeholder="Last Name" th:value="*{lastname}" />
			</div>

			<div class="row my-3 align-items-center">
				<div class="col-auto">
					<p class="text-sm mb-0">Gender</p>
				</div>
				<div class="col">
					<select id="gender"  th:field="*{gender}">
<!--						<option th:value="*{gender}"></option>-->
						<option value="" disabled selected>Select gender</option>
						<option value="Male">Male</option>
						<option value="Female">Female</option>
						<option value="Other">Other</option>
					</select>
				</div>
			</div>

			<div>
				<input class="style_button_1 my-1" type="number" id="age" name="age" placeholder="Age" required min="1" max="120" th:value="*{age}" />
			</div>
					
			<div>
				<input class="style_button_1" type="text" id="contact" name="contact" placeholder="Mobile number" th:value="*{contact}" />
				<input class="style_button_1" type="text" id="altContact" name="altContact" placeholder="Alternate Mobile number" />
			</div>
			
			<div>
				<input class="style_button_1" type="email" id="email" name="email" placeholder="Email" th:value="*{email}" />
			</div>
			
						
			<div class="row my-3 align-items-center">
				<div class="col-auto">
					<p class="text-sm mb-0">Date of Birth</p>
				</div>
				<div class="col">
					<input type="date" name="dob" id="dob" placeholder="Date of birth"  />
				</div>
			</div>

			<!-- Permanent and Temporary Address with Copy Checkbox -->
			<div>
				<textarea class="style_button_1 my-1" name="permanentAddress" id="permanentAddress" placeholder="Permanent Address" th:text="*{permanentAddress}"></textarea>
				
				<!-- Checkbox to copy permanent address to temporary -->
				<div class="my-1">
					<input type="checkbox" id="sameAsPermanent" onclick="copyAddress()" />
					<label for="sameAsPermanent">Same as Permanent Address</label>
				</div>

				<textarea class="style_button_1 my-1" name="temporaryAddress" id="temporaryAddress" placeholder="Temporary Address" th:text="*{temporaryAddress}"></textarea>
			</div>
          
			<p class="text-sm">By clicking Sign Up, you agree to our Terms, Privacy Policy and Cookies Policy. You may receive SMS notifications from us and can opt out at any time.</p>
			<center><button type="submit" class="btn btn-danger align-items-center"><b>Update</b></button></center>
        </form>
		
      </div>
    </div>

	<footer class="footer section gray-bg" style="top: 10px;position: relative;">
			<div class="container">
				<div class="row">
					<div class="col-lg-4 mr-auto col-sm-6">
						<div class="widget mb-5 mb-lg-0">
							<div class="logo mb-4">
								<img src="images/logo.png" alt="" class="img-fluid">
							</div>
							<p>Tempora dolorem voluptatum nam vero assumenda voluptate, facilis ad eos obcaecati tenetur veritatis eveniet distinctio possimus.</p>

							<ul class="list-inline footer-socials mt-4">
								<li class="list-inline-item"><a href="https://www.facebook.com/themefisher"><i class="icofont-facebook"></i></a></li>
								<li class="list-inline-item"><a href="https://twitter.com/themefisher"><i class="icofont-twitter"></i></a></li>
								<li class="list-inline-item"><a href="https://www.pinterest.com/themefisher/"><i class="icofont-whatsapp"></i></a></li>
								<li class="list-inline-item"><a href="https://www.pinterest.com/themefisher/"><i class="icofont-linkedin"></i></a></li>
								<li class="list-inline-item"><a href="https://www.pinterest.com/themefisher/"><i class="icofont-instagram"></i></a></li>

							</ul>
						</div>
					</div>

					<div class="col-lg-2 col-md-6 col-sm-6">
						<div class="widget mb-5 mb-lg-0">
							<h4 class="text-capitalize mb-3">Department</h4>
							<div class="divider mb-4"></div>

							<ul class="list-unstyled footer-menu lh-35">
								<li><a href="#">Surgery </a></li>
								<li><a href="#">Wome's Health</a></li>
								<li><a href="#">Radiology</a></li>
								<li><a href="#">Cardioc</a></li>
								<li><a href="#">Medicine</a></li>
							</ul>
						</div>
					</div>

					<div class="col-lg-2 col-md-6 col-sm-6">
						<div class="widget mb-5 mb-lg-0">
							<h4 class="text-capitalize mb-3">Support</h4>
							<div class="divider mb-4"></div>

							<ul class="list-unstyled footer-menu lh-35">
								<li><a href="#">Terms & Conditions</a></li>
								<li><a href="#">Privacy Policy</a></li>
								<li><a href="#">Company Support </a></li>
								<li><a href="#">FAQuestions</a></li>
								<li><a href="#">Company Licence</a></li>
							</ul>
						</div>
					</div>

					<div class="col-lg-3 col-md-6 col-sm-6">
						<div class="widget widget-contact mb-5 mb-lg-0">
							<h4 class="text-capitalize mb-3">Get in Touch</h4>
							<div class="divider mb-4"></div>

							<div class="footer-contact-block mb-4">
								<div class="icon d-flex align-items-center">
									<i class="icofont-email mr-3"></i>
									<span class="h6 mb-0">Support Available for 24/7</span>
								</div>
								<h4 class="mt-2"><a href="tel:+23-345-67890">Support@email.com</a></h4>
							</div>

							<div class="footer-contact-block">
								<div class="icon d-flex align-items-center">
									<i class="icofont-support mr-3"></i>
									<span class="h6 mb-0">Mon to Fri : 08:30 - 18:00</span>
								</div>
								<h4 class="mt-2"><a href="tel:+23-345-67890">+23-456-6588</a></h4>
							</div>
						</div>
					</div>
				</div>
				
				<div class="footer-btm py-4 mt-5">
					<div class="row align-items-center justify-content-between">
						<div class="col-lg-6">
							<div class="copyright">
								&copy; Copyright Reserved to <span class="text-color">Novena</span> by <a href="https://themefisher.com/" target="_blank">Themefisher</a>
							</div>
						</div>
						<div class="col-lg-6">
							<div class="subscribe-form text-lg-right mt-5 mt-lg-0">
								<form action="#" class="subscribe">
									<input type="text" class="form-control" placeholder="Your Email address">
									<a href="#" class="btn btn-main-2 btn-round-full">Subscribe</a>
								</form>
							</div>
						</div>
					</div>

					<div class="row">
						<div class="col-lg-4">
							<a class="backtop js-scroll-trigger" href="#top">
								<i class="icofont-long-arrow-up"></i>
							</a>
						</div>
					</div>
				</div>
			</div>
		</footer>	
	<script>
		function validateForm() {
			// Validate name (no special characters)
			const namePattern = /^[A-Za-z\s]+$/;
			const firstName = document.getElementById('firstname').value;
			const middleName = document.getElementById('middlename').value;
			const lastName = document.getElementById('lastname').value;

			if (!namePattern.test(firstName) || !namePattern.test(middleName) || !namePattern.test(lastName)) {
				alert("Names must contain only letters and spaces.");
				return false;
			}

			// Validate contact numbers (10 digits)
			const contact = document.getElementById('contact').value;
			if (!/^\d{10}$/.test(contact)) {
				alert("Please enter a valid 10-digit contact number.");
				return false;
			}

			const altContact = document.getElementById('altContact').value;
			if (altContact && !/^\d{10}$/.test(altContact)) {
				alert("Please enter a valid 10-digit alternate contact number.");
				return false;
			}

			// Validate age (1-120)
			const age = document.getElementById('age').value;
			if (age < 1 || age > 120) {
				alert("Please enter a valid age between 1 and 120.");
				return false;
			}

			// Validate email
			const email = document.getElementById('email').value;
			const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
			if (!emailPattern.test(email)) {
				alert("Please enter a valid email address.");
				return false;
			}

			// Validate addresses (no special characters)
			const addressPattern = /^[A-Za-z0-9\s,.-]+$/;
			const permanentAddress = document.getElementById('permanentAddress').value;
			if (!addressPattern.test(permanentAddress)) {
				alert("Permanent address contains invalid characters. Only letters, numbers, spaces, commas, periods, and hyphens are allowed.");
				return false;
			}

			const temporaryAddress = document.getElementById('temporaryAddress').value;
			if (temporaryAddress && !addressPattern.test(temporaryAddress)) {
				alert("Temporary address contains invalid characters. Only letters, numbers, spaces, commas, periods, and hyphens are allowed.");
				return false;
			}
			
			const password = document.getElementById('password').value;
			    const confirmPassword = document.getElementById('confirmPassword').value;
			    if (password !== confirmPassword) {
			        alert("Passwords do not match. Please enter the same password in both fields.");
			        return false;
			    }

			return true; // All validations passed
		}

		// Address copy logic when checkbox is clicked
		function copyAddress() {
			const permanentAddress = document.getElementById('permanentAddress').value;
			const temporaryAddress = document.getElementById('temporaryAddress');
			const sameAsPermanent = document.getElementById('sameAsPermanent').checked;

			if (sameAsPermanent) {
				temporaryAddress.value = permanentAddress;
				temporaryAddress.readOnly = true; // Make Temporary Address read-only
			} else {
				temporaryAddress.value = ''; // Clear Temporary Address if unchecked
				temporaryAddress.readOnly = false; // Allow editing if not copying
			}
		}

		// Disable future dates in the Date of Birth field
		window.onload = function() {
			const today = new Date().toISOString().split('T')[0];
			document.getElementById('dob').setAttribute('max', today);
		}
	</script>

</body>
</html>